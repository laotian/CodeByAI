<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Settings - Sketch Measure 2.0</title>

    <link href="assets/css/normalize.css" rel="stylesheet">
    <link href="assets/css/app.css" rel="stylesheet">
    <script type="text/javascript" src="assets/js/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="assets/js/common.js"></script>
    <script type="text/javascript">
    <!--
    const codeTypes = ["RN","React","Vue","Android"];
    let export3xIdName = "export-3x";
    var getDesignResolutionID = function(scale, unit){
            var scale = scale || 1,
                unit = unit || 'px';

            scale = scale.toString().replace('.', '_');
            unit = unit.replace('/', '_');

            id = unit + '-' + scale;

            if($('#' + id).length <= 0) return 'custom';

            return id;

        },
        getScaleWidthUnit = function( id ){
            if (id == 'custom') return false;
            var id = id.split('-'),
                unit = id[0],
                scale = id[1];

            return {
                scale: Number(scale.replace('_', '.')),
                unit: unit.replace('_', '/')
            }
        },
        checkResolution = function(DRID){
            $('#' + DRID).click();
        },
        submit = function(){
          var data = {}
          codeTypes.forEach(function (type) {
            if( $('input[name=export-' + type + ']:checked').length > 0 ){
              data[type] = true;
            }else{
              data[type] = false;
            }
          });
          if( $('input[name=' + export3xIdName +  ']:checked').length > 0 ) {
            data.export3x = true;
          }else{
            data.export3x = false;
          }
          SMAction('submit', data);
            // console.log(window.location.hash)
        },
        init = function(data){

          const headHtml = [
            '<div class="container">',
              '<div class="options" style="height:194px">',
                '<h3>' + _('Code type') + '</h3>',
          ];

          const codeTypesHtml = codeTypes.map(function (type) {
            const idName = "export-" + type;
            return [
              '<div class="item" style="margin-top:10px;">',
                '<label>',
                  '<div class="checkbox">',
                    '<input id="' + idName + '" type="checkbox" name="' + idName + '" value="0">',
                    '<label for="' + idName + '"></label>',
                  '</div>',
                  _(type),
                '</label>',
              '</div>'
            ];
          }).reduce(function (p,c) {
            return p.concat(c);
          },[]);


          const bottomHtml = [
                '<div class="item" style="margin-top:20px;">',
                  '<label>',
                    '<div class="checkbox">',
                      '<input id="' + export3xIdName + '" type="checkbox" name="' + export3xIdName + '" value="0">',
                      '<label for="' + export3xIdName + '"></label>',
                    '</div>',
                    _('export 3x pic'),
                  '</label>',
                '</div>',
              '</div>',
              '<div class="footer">',
                '<button id="submit" class="submit">' + _('Save') + '</button>',
                '</div>',
              '</div>',
            '</div>'
          ];

            $('body').html([].concat(headHtml).concat(codeTypesHtml).concat(bottomHtml).join(''));

            //["RN","React","Vue","Android"]

            var data = $.extend({
                            // scale: 1,
                            // unit: 'px',
                            // colorFormat: 'color-hex',
                            export3x: false,
                            RN: true,
                            React: true,
                            Vue: true,
                            Android: true,
                        }, data);

          codeTypes.forEach(function (type) {
            const idName = "#export-" + type;
            if(data[type]){
              $(idName).attr('checked', true);
            }
          });

          if(data.export3x){
            $('#'+export3xIdName).attr('checked', true);
          }



            //     id = getDesignResolutionID(data.scale, data.unit);
            //  $('.resolution input').change(function(){
            //     var $this = $(this),
            //         id = $this.val(),
            //         scaleWidthUnit = getScaleWidthUnit(id);
            //
            //     if(!scaleWidthUnit) return false;
            //     $('input[name=scale]').val(scaleWidthUnit.scale);
            //     $('input[name=unit]').val(scaleWidthUnit.unit);
            // });
            //
            // checkResolution(id);
            // $('#' + data.colorFormat).click();
            //
            // if(id == 'custom'){
            //     $('input[name=scale]').val(data.scale);
            //     $('input[name=unit]').val(data.unit);
            // }

            // $('.selectbox').each(function(index){
            //     var $this = $(this);
            //
            //     $this.find('h3').on('click', function(){
            //         $this.blur();
            //     });
            //
            //     $this.find('input').change(function(){
            //         var $parent = $this.find('input:checked').parent(),
            //             text = $parent.find('span').text();
            //         $this.find('p').html(text);
            //         $this.blur();
            //     });
            //
            //     var $parentLabel = $this.find('input:checked').parent(),
            //         $parentLi = $parentLabel.parent(),
            //         text = $parentLabel.find('span').text();
            //
            //     $this.find('ul').scrollTop($parentLi.position().top);
            //
            //     $this.find('p').html(text);
            // });

            $('input[name=scale]').keypress(function(event){
                var eventObj = event || e,
                    keyCode = eventObj.keyCode || eventObj.which;

                if ((keyCode >= 48 && keyCode <= 57) || keyCode == 46)
                    return true;
                else
                    return false;
            });

            $('input[name=unit]').keypress(function(event){
                var eventObj = event || e,
                    keyCode = eventObj.keyCode || eventObj.which;

                if ((keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122) || keyCode == 47)
                    return true;
                else
                    return false;
            });

            $('input[type=text]').keyup(function(){
                var scale = $('input[name=scale]').val(),
                    unit = $('input[name=unit]').val();

                if(scale && unit){
                    checkResolution(getDesignResolutionID(scale, unit));
                    $('.resolution ul').scrollTop(0);
                    var scrollTop = $('.resolution input:checked').parent().parent().position().top;
                    $('.resolution ul').scrollTop(scrollTop);
                }
            })
            .focus(function () {
                this.style.imeMode = 'disabled';
            })
            .blur(function(){
                var scale = $('input[name=scale]').val(),
                    unit = $('input[name=unit]').val();
                if(!scale){
                    $('input[name=scale]').val(1);
                }

                if(!unit){
                    $('input[name=unit]').val('px');
                }
            });

            $("#submit").click(submit);

            $('.container').show();
        };
        // $(function(){
        //     init()
        // });
    -->
    </script>
  </head>
  <body></body>
</html>
